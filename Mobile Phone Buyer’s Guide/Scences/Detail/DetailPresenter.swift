//
//  DetailPresenter.swift
//  Mobile Phone Buyerâ€™s Guide
//
//  Created by Tanasak Ngerniam on 28/1/2562 BE.
//  Copyright (c) 2562 NilNilNil. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

protocol DetailPresentationLogic {
    func presentPhoneDetail(response: Detail.PhoneDetail.Response)
    
}

class DetailPresenter: DetailPresentationLogic {
    weak var viewController: DetailDisplayLogic?

    // MARK: Do something
    func presentPhoneDetail(response: Detail.PhoneDetail.Response) {
        if let phoneDetail = response.phoneDetail {
            let viewModel = Detail.PhoneDetail.ViewModel.init(id: phoneDetail.id,
                                                            name: phoneDetail.name,
                                                            description: phoneDetail._description,
                                                            price: "Price: $\(String(format: "%.2f", phoneDetail.price))",
                rating: "Rating: \(phoneDetail.rating)",
                imagesPath: response.phoneImages.map {
                    if !$0.url.contains("http") {
                        return "http://" + $0.url
                    }
                    return $0.url
            })
            viewController?.displayPhoneDetail(viewModel: viewModel)
        } else if let errorMessage = response.errorMessage {
            viewController?.displayError(error: Detail.PhoneDetail.Error(errorMessage: errorMessage))
        }
    }
}
